{% macro include_resources(resource_summary) -%}
  {% if resource_summary.has_tweets %}
    <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  {% endif %}

  {% if resource_summary.youtube_video_ids %}
    <!-- From https://developers.google.com/youtube/player_parameters#IFrame_Player_API -->
    <script>
      // Load the IFrame Player API code asynchronously.
      var tag = document.createElement('script');
      tag.src = "https://www.youtube.com/player_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      function createPlayer(videoId, videoPlayerId) {
        new YT.Player(videoPlayerId, {
          height: '390',
          width: '640',
          videoId: videoId
        });
      }
      function onYouTubePlayerAPIReady() {
        {% for video_id in resource_summary.youtube_video_ids %}
          createPlayer("{{ video_id }}", "{{ video_id|youtubeplayerid }}");
        {% endfor %}
      }
    </script>
  {% endif %}
{%- endmacro %}

